---
import imageUrlBuilder from "@sanity/image-url";
import { sanityClient } from "sanity:client";
import { Image } from 'astro:assets';


const builder = imageUrlBuilder(sanityClient)

const {node, width = 960, height} = Astro.props

// See https://www.sanity.io/docs/presenting-images for general documentation on
// presenting images, and https://www.sanity.io/docs/image-url for specifics on
// this builder API
const image = node && builder
  .image(node)
  .width(width)
  .height(height)
  .fit('max')
  .auto('format')
---

<!-- The `Image` component uses `getImage()` under the covers,
which causes Astro to download/inline the image within its
prod-build distro. -->
{image && <Image width={width} height={height} src={image.url()} alt={node.alt || ""} title={node.alt} />}